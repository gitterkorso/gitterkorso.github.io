<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pyodide Demo</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background: #f9f9f9;
      color: #222;
      transition: background 0.3s, color 0.3s;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
    }
    pre {
      background: #eee;
      padding: 1rem;
      margin-top: 1rem;
    }
    nav {
      margin-bottom: 1rem;
    }
    .tablink {
      padding: 0.5rem 1rem;
      margin-right: 0.5rem;
      cursor: pointer;
      background: #ddd;
      color: #222;
      border: none;
      font-weight: bold;
    }
    .tablink:hover {
      background: #ccc;
    }
    .tabcontent {
      display: none;
      background: #eee;
      color: #222;
      padding: 1rem;
      transition: background 0.3s, color 0.3s;
    }
    .tabcontent.active {
      display: block;
    }
    .clock {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 1rem;
      background: #ddd;
      color: #222;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
    }
    /* Social links container */
    .social-links {
      position: absolute;
      top: 10px;
      left: 20px;
      display: flex;
      gap: 16px;
      z-index: 10;
    }
    .social-links a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
    }
    .social-icon, .youtube-icon {
      width: 100%;
      height: 100%;
      transition: transform 0.2s;
      display: block;
    }
    .social-icon:hover, .youtube-icon:hover {
      transform: scale(1.1);
    }
    /* Ta bort gamla positioneringar */
    #youtube-link, #github-link, #linkedin-link {
      position: static;
      left: unset;
      top: unset;
    }
    /* Språkväxlare uppe till höger */
    .lang-switcher {
      position: absolute;
      top: 10px;
      right: 130px; /* Flytta till vänster om klockan */
      display: flex;
      gap: 10px;
      z-index: 20;
    }
    .lang-flag {
      width: 32px;
      height: 22px;
      cursor: pointer;
      border: 2px solid transparent;
      border-radius: 4px;
      transition: border 0.2s;
      background: #fff;
      object-fit: cover;
    }
    .lang-flag.selected {
      border: 2px solid #0077B5;
    }
    @media (prefers-color-scheme: dark) {
      body {
        background: #181a1b;
        color: #f1f1f1;
      }
      .tabcontent {
        background: #23272a;
        color: #f1f1f1;
      }
      .clock {
        background: #23272a;
        color: #f1f1f1;
      }
      .tablink {
        background: #23272a;
        color: #f1f1f1;
      }
      pre {
        background: #23272a;
        color: #f1f1f1;
      }
      .lang-flag {
        background: #23272a;
      }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
</head>
<body>
    <div class="social-links">
      <a href="https://www.youtube.com/@nickwestin3967" target="_blank" id="youtube-link" aria-label="YouTube">
        <svg xmlns="http://www.w3.org/2000/svg" class="youtube-icon" viewBox="0 0 24 24">
          <path fill="#FF0000" d="M23.5 6.2c-.3-1.3-1.3-2.2-2.6-2.4C18.6 3.5 12 3.5 12 3.5s-6.6 0-8.9.3C1.8 4 0.8 4.9 0.5 6.2 0.2 8.1 0 10 0 12s.2 3.9.5 5.8c.3 1.3 1.3 2.2 2.6 2.4C5.4 20.5 12 20.5 12 20.5s6.6 0 8.9-.3c1.3-.2 2.3-1.1 2.6-2.4.3-1.9.5-3.8.5-5.8s-.2-3.9-.5-5.8zM9.6 15.5V8.5l6.4 3.5-6.4 3.5z"/>
        </svg>
      </a>
      <a href="https://github.com/gitterkorso" target="_blank" id="github-link" aria-label="GitHub">
        <svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path fill="#000" d="M12 .5C5.7.5.5 5.7.5 12c0 5.1 3.3 9.5 7.9 11.1.6.1.8-.3.8-.6v-2.1c-3.2.7-3.9-1.4-3.9-1.4-.5-1.2-1.1-1.5-1.1-1.5-.9-.6.1-.6.1-.6 1 .1 1.5 1 1.5 1 .9 1.5 2.4 1.1 3 .9.1-.7.4-1.1.7-1.3-2.6-.3-5.3-1.3-5.3-5.8 0-1.3.5-2.3 1.2-3.1-.1-.3-.5-1.5.1-3.2 0 0 1-.3 3.2 1.2a11.1 11.1 0 0 1 5.8 0C17.9 6 19 6.3 19 6.3c.6 1.7.2 2.9.1 3.2.7.8 1.2 1.8 1.2 3 0 4.5-2.7 5.5-5.3 5.8.4.3.8 1 .8 2.1v3c0 .3.2.7.8.6A11.5 11.5 0 0 0 23.5 12C23.5 5.7 18.3.5 12 .5z"/>
        </svg>
      </a>
      <a href="https://www.linkedin.com/in/nick-westin-44b590369/" target="_blank" id="linkedin-link" aria-label="LinkedIn">
        <svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path fill="#0077B5" d="M19 0h-14c-2.8 0-5 2.2-5 5v14c0 2.8 2.2 5 5 5h14c2.8 0 5-2.2 5-5v-14c0-2.8-2.2-5-5-5zm-11 19h-3v-9h3v9zm-1.5-10.3c-1 0-1.7-.8-1.7-1.7 0-1 .8-1.7 1.7-1.7s1.7.8 1.7 1.7c0 .9-.8 1.7-1.7 1.7zm13.5 10.3h-3v-4.7c0-1.1 0-2.4-1.5-2.4s-1.7 1.2-1.7 2.3v4.8h-3v-9h2.9v1.2h.1c.4-.8 1.4-1.5 2.9-1.5 3.1 0 3.7 2 3.7 4.6v4.7z"/>
        </svg>
      </a>
    </div>
    <div class="lang-switcher">
      <img src="https://flagcdn.com/se.svg" alt="Svenska" id="flag-sv" class="lang-flag selected" title="Svenska" />
      <img src="https://flagcdn.com/gb.svg" alt="English" id="flag-en" class="lang-flag" title="English" />
    </div>
  <div id="clock" class="clock"></div>

  <h1>Nick Westin</h1>
  <h3>Structural Engineering Student at KTH Stockholm</h3>

  <nav>
      <button class="tablink" id="tab-about-me" onclick="openTab('about-me')">Om mig</button>
      <button class="tablink" id="tab-cv" onclick="openTab('cv')">CV och Personligt Brev</button>
      <button class="tablink" id="tab-projekt" onclick="openTab('projekt')">Projekt</button>
      <button class="tablink" id="tab-program" onclick="openTab('program')">Program</button>
      <button class="tablink" id="tab-blogg" onclick="openTab('blogg')">Blogg</button>
      <button class="tablink" id="tab-python" onclick="openTab('python')">Python</button>
    </nav>

<section id="cv" class="tabcontent">
  <h2>CV och Personligt Brev</h2>
  <p id="cv-content">Du kan ladda ner eller öppna mitt CV och personliga brev här:</p>
  <ul>
    <li><a href="cv.pdf" target="_blank" id="cv-link">Öppna CV (PDF)</a></li>
    <li><a href="#" id="personal-letter-link">Kommer snart</a></li>
  </ul>
</section>


  <section id="projekt" class="tabcontent" style="display:none">
    <h2>Projekt</h2>
    <p>Lista på projekt...</p>
  </section>

<section id="program" class="tabcontent" style="display:none">
  <h2>Moment of Inertia Calculator</h2>
  <p>Beräkna Iy och Iz (mm⁴) för en rektangel:</p>

  <label for="height">Höjd (h, mm):</label>
  <input type="number" id="height" />

  <label for="width">Bredd (b, mm):</label>
  <input type="number" id="width" />

  <button id="run-calc">Beräkna</button>

  <pre id="result">Iy: -\nIz: -</pre>
</section>

<section id="python" class="tabcontent" style="display:none">
  <h2>Python Math Sheet</h2>
  <p>Skriv dina beräkningar eller definiera variabler i Python:</p>

  <textarea id="mathcode" rows="8" style="width:100%; font-family:monospace;"></textarea>
  <br />
  <button id="run-math">Kör kod</button>
  <pre id="math-output">Output visas här...</pre>
</section>

<section id="about-me" class="tabcontent" style="display:none">
  <h2>About Me</h2>
  <p>Hej! Jag heter Nick Westin och studerar till civilingenjör i samhällsbyggnad på KTH i Stockholm. Jag är särskilt intresserad av konstruktion, programmering och problemlösning. På fritiden gillar jag att lära mig nya saker, bygga projekt och träna.</p>
</section>

<section id="blogg" class="tabcontent" style="display:none">
  <h2>Blogg</h2>
  <p>Här kommer jag att dela tankar, projektuppdateringar och tips om teknik, studier och ingenjörsliv.</p>
  <ul>
    <li><strong>22 juni 2025:</strong> Här är en bild från mitt senaste projekt!<br><img src="21.jpg" alt="Projektbild" style="max-width:300px; border-radius:8px; margin-top:8px;"></li>
    <li><strong>21 juni 2025:</strong> Första blogginlägget! Sidan har nu stöd för mörkt och ljust tema samt nya flikar.</li>
  </ul>
</section>

  <script>
    function updateClock() {
      const now = new Date();
      const time = now.toLocaleTimeString('sv-SE', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      document.getElementById('clock').textContent = time;
    }
    setInterval(updateClock, 1000);
    updateClock();

    function openTab(tabName) {
      const contents = document.querySelectorAll(".tabcontent");
      contents.forEach(el => el.style.display = "none");
      document.getElementById(tabName).style.display = "block";
    }

    // Visa första fliken som standard
    openTab('about-me');

    let pyodideReadyPromise = null;
    async function loadPyodideAndPackages() {
      if (!pyodideReadyPromise) {
        pyodideReadyPromise = loadPyodide();
      }
      return pyodideReadyPromise;
    }

    // Moment of Inertia Calculator
    document.getElementById("run-calc").addEventListener("click", async function() {
      const h = parseFloat(document.getElementById("height").value);
      const b = parseFloat(document.getElementById("width").value);
      const resultElem = document.getElementById("result");
      if (isNaN(h) || isNaN(b)) {
        resultElem.textContent = "Felaktig inmatning.";
        return;
      }
      const pyodide = await loadPyodideAndPackages();
      pyodide.globals.set('h', h);
      pyodide.globals.set('b', b);
      const code = `Iy = (b * h ** 3) / 12\nIz = (h * b ** 3) / 12\nf'Iy: {Iy:.2f} mm⁴\\nIz: {Iz:.2f} mm⁴'`;
      try {
        const output = await pyodide.runPythonAsync(code);
        resultElem.textContent = output;
      } catch (e) {
        resultElem.textContent = "Fel: " + e;
      }
    });

    // Python Math Sheet
    document.getElementById("run-math").addEventListener("click", async function() {
      const code = document.getElementById("mathcode").value;
      const outputElem = document.getElementById("math-output");
      const pyodide = await loadPyodideAndPackages();
      try {
        // Kör koden och samla variabler
        await pyodide.runPythonAsync(code + "\nlocals_dict = {k: v for k, v in locals().items() if not k.startsWith('__')}");
        const result = await pyodide.runPythonAsync("'\\n'.join(f'{k} = {v}' for k, v in locals_dict.items())");
        outputElem.textContent = result;
      } catch (e) {
        outputElem.textContent = "Fel: " + e;
      }
    });
    // Språkväxling
    const translations = {
      sv: {
        'tab-about-me': 'Om mig',
        'tab-cv': 'CV och Personligt Brev',
        'tab-projekt': 'Projekt',
        'tab-program': 'Program',
        'tab-blogg': 'Blogg',
        'tab-python': 'Python',
        'about-me-title': 'About Me',
        'about-me-content': 'Hej! Mitt namn är Nick och jag studerar till civilingenjör inom samhällsbyggnad med inriktning mot byggnadskonstruktör. Jag är särskillt intresserad av konstruktion, programmering och problemlösning. Mina hobbies inkluderar längdskidåkinng och alpin skidåkning. Men även små projekt som denna att koda denna hemsida och att snickra intresserar mig.',
        'blogg-title': 'Blogg',
        'blogg-content': 'Här kommer jag att dela tankar, projektuppdateringar och tips om teknik, studier och ingenjörsliv.',
        'blogg-posts': `<ul><li><strong>22 juni 2025:</strong> Här är en bild från mitt senaste projekt!<br><img src="21.jpg" alt="Projektbild" style="max-width:300px; border-radius:8px; margin-top:8px;"></li><li><strong>21 juni 2025:</strong> Första blogginlägget! Sidan har nu stöd för mörkt och ljust tema samt nya flikar.</li></ul>`,
        'cv-title': 'CV',
        'cv-content': 'Du kan ladda ner eller öppna mitt CV här:',
        'cv-link': 'Öppna CV (PDF)',
        'personal-letter-title': 'Personal Letter',
        'personal-letter-content': 'Du kan ladda ner eller öppna mitt CV här:',
        'personal-letter-link': 'Öppna personal letter (PDF)',
      },
      en: {
        'tab-about-me': 'About Me',
        'tab-cv': 'CV & Personal Letter',
        'tab-projekt': 'Projects',
        'tab-program': 'Calculator',
        'tab-blogg': 'Blog',
        'tab-python': 'Python',
        'about-me-title': 'About Me',
        'about-me-content': "Hi! My name is Nick and I am studying to become a civil engineer in civil engineering with a focus on structural engineering. I am especially interested in construction, programming, and problem solving. My hobbies include cross-country and alpine skiing. But I also enjoy small projects like coding this website and woodworking.",
        'blogg-title': 'Blog',
        'blogg-content': 'Here I will share thoughts, project updates, and tips about technology, studies, and engineering life.',
        'blogg-posts': '<ul><li><strong>June 21, 2025:</strong> First blog post! The site now supports dark and light theme and new tabs.</li></ul>',
        'cv-title': 'CV',
        'cv-content': 'You can download or open my CV here:',
        'cv-link': 'Open CV (PDF)',
        'personal-letter-title': 'Personal Letter',
        'personal-letter-content': 'You can download or open my personal letter here:',
        'personal-letter-link': 'Open personal letter (PDF)',
      }
    };
    function setLanguage(lang) {
      // Flagga
      document.getElementById('flag-sv').classList.toggle('selected', lang === 'sv');
      document.getElementById('flag-en').classList.toggle('selected', lang === 'en');
      // Tabbar
      document.getElementById('tab-about-me').textContent = translations[lang]['tab-about-me'];
      document.getElementById('tab-cv').textContent = translations[lang]['tab-cv'];
      document.getElementById('tab-projekt').textContent = translations[lang]['tab-projekt'];
      document.getElementById('tab-program').textContent = translations[lang]['tab-program'];
      document.getElementById('tab-blogg').textContent = translations[lang]['tab-blogg'];
      document.getElementById('tab-python').textContent = translations[lang]['tab-python'];
      // About Me
      document.querySelector('#about-me h2').textContent = translations[lang]['about-me-title'];
      document.querySelector('#about-me p').textContent = translations[lang]['about-me-content'];
      // Blogg
      document.querySelector('#blogg h2').textContent = translations[lang]['blogg-title'];
      document.querySelector('#blogg p').textContent = translations[lang]['blogg-content'];
      document.querySelector('#blogg ul')?.remove();
      const bloggSection = document.getElementById('blogg');
      bloggSection.insertAdjacentHTML('beforeend', translations[lang]['blogg-posts']);
      // CV
      document.querySelector('#cv h2').textContent = translations[lang]['cv-title'];
      document.querySelector('#cv p').textContent = translations[lang]['cv-content'];
      document.querySelector('#cv a').textContent = translations[lang]['cv-link'];
      // Personal Letter
      document.querySelector('#personal-letter h2').textContent = translations[lang]['personal-letter-title'];
      document.querySelector('#personal-letter p').textContent = translations[lang]['personal-letter-content'];
      document.querySelector('#personal-letter a').textContent = translations[lang]['personal-letter-link'];
    }
    document.getElementById('flag-sv').addEventListener('click', () => setLanguage('sv'));
    document.getElementById('flag-en').addEventListener('click', () => setLanguage('en'));
    // Visa svenska som standard vid sidladdning
    window.addEventListener('DOMContentLoaded', function() {
      setLanguage('sv');
    });
  </script>
</body>
</html>